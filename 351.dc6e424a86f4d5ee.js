"use strict";(self.webpackChunkairways=self.webpackChunkairways||[]).push([[351],{6351:(it,_,s)=>{s.r(_),s.d(_,{default:()=>at});var a=s(433),h=s(6895),m=s(5870),P=s(9488),t=s(4650),Z=s(9751),d=s(727),F=s(833),u=s(8090),g=s(117),l=s(9886),C=s(415),y=s(6260);const J=["input"];let D=(()=>{class o{constructor(e){this.tokenValue=e,this.form=new a.cw({range:new a.NI}),this.changeDateValue=new t.vpe,this.input={},this.min=u.TU.fromLocalNativeDate(new Date),this.max=new u.TU(this.min.year,this.min.month+1,this.min.day)}changeValue(){this.changeDateValue.emit(this.form.controls.range.value)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.P_))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-date-range"]],viewQuery:function(e,n){if(1&e&&t.Gf(J,5),2&e){let i;t.iGM(i=t.CRH())&&(n.input=i.first)}},outputs:{changeDateValue:"changeDateValue"},decls:5,vars:3,consts:[[3,"formGroup"],["tuiUnfinishedValidator","Finish filling the field","formControlName","range","tuiTextfieldSize","m",1,"date",3,"min","max","tuiValueChanges"],["input",""],["tuiTextfield","","placeholder","From - To"]],template:function(e,n){1&e&&(t.ynx(0,0),t.TgZ(1,"tui-input-date-range",1,2),t.NdJ("tuiValueChanges",function(){return n.changeValue()}),t._uU(3," Choose dates "),t._UZ(4,"input",3),t.qZA(),t.BQk()),2&e&&(t.Q6J("formGroup",n.form),t.xp6(1),t.Q6J("min",n.min)("max",n.max))},dependencies:[g.MB,l.sz,C.z,y.H5,y.dc,a.JJ,a.JL,a.sg,a.u],styles:["[_nghost-%COMP%]{width:100%}"]}),o})();var x=s(1841);const V=["input"];let I=(()=>{class o{constructor(e){this.tokenValue=e,this.changeDateValue=new t.vpe,this.input={},this.form=new a.cw({date:new a.NI})}changeValue(){this.changeDateValue.emit(this.form.controls.date.value)}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(u.P_))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-date"]],viewQuery:function(e,n){if(1&e&&t.Gf(V,5),2&e){let i;t.iGM(i=t.CRH())&&(n.input=i.first)}},outputs:{changeDateValue:"changeDateValue"},decls:4,vars:1,consts:[[3,"formGroup"],["tuiTextfieldSize","m","formControlName","date",3,"tuiValueChanges"],["input",""]],template:function(e,n){1&e&&(t.ynx(0,0),t.TgZ(1,"tui-input-date",1,2),t.NdJ("tuiValueChanges",function(){return n.changeValue()}),t._uU(3," Choose a date "),t.qZA(),t.BQk()),2&e&&t.Q6J("formGroup",n.form)},dependencies:[l.sz,C.z,x.jL,x.k_,a.JJ,a.JL,a.sg,a.u]}),o})(),A=(()=>{class o{constructor(e,n){this.componentFactoryResolver=e,this.injector=n}createOneWayCalendar(e){const n=this.componentFactoryResolver.resolveComponentFactory(I),i=t.zs3.create({providers:[{provide:u.P_,useValue:e}],parent:this.injector});return n.create(i)}createRangeCalendar(e){const n=this.componentFactoryResolver.resolveComponentFactory(D),i=t.zs3.create({providers:[{provide:u.P_,useValue:e}],parent:this.injector});return n.create(i)}}return o.\u0275fac=function(e){return new(e||o)(t.LFG(t._Vd),t.LFG(t.zs3))},o.\u0275prov=t.Yz7({token:o,factory:o.\u0275fac,providedIn:"root"}),o})();var p=s(972),G=s(9653),v=s(9367),N=s(7579),S=s(9300),L=s(3900),Q=s(4004),R=s(2524),w=s(3861),T=s(9216),U=s(8917),M=s(7765),z=s(4227);const Y=["from"],k=["to"];function B(o,r){if(1&o&&t._UZ(0,"tui-data-list-wrapper",9),2&o){const e=t.oxw().tuiLet;t.Q6J("items",e)}}function H(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tui-combo-box",5),t.NdJ("searchChange",function(i){t.CHM(e);const c=t.oxw();return t.KtG(c.onSearchChange(i))})("focusedChange",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.focus())}),t._uU(1," From "),t.TgZ(2,"input",6,7),t.NdJ("input",function(i){t.CHM(e);const c=t.oxw();return t.KtG(c.onSearchChange(c.extractValueFromEvent(i)))}),t.qZA(),t.YNc(4,B,1,1,"tui-data-list-wrapper",8),t.qZA()}}function X(o,r){if(1&o&&t._UZ(0,"tui-data-list-wrapper",9),2&o){const e=t.oxw().tuiLet;t.Q6J("items",e)}}function j(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"tui-combo-box",10),t.NdJ("searchChange",function(i){t.CHM(e);const c=t.oxw();return t.KtG(c.onSearchChange(i))}),t._uU(1," To "),t.TgZ(2,"input",6,11),t.NdJ("input",function(i){t.CHM(e);const c=t.oxw();return t.KtG(c.onSearchChange(c.extractValueFromEvent(i)))}),t.qZA(),t.YNc(4,X,1,1,"tui-data-list-wrapper",8),t.qZA()}}let W=(()=>{class o{constructor(e,n){this.formGroupRoot=e,this.apiService=n,this.search$=new N.x,this.fromInput={},this.toInput={},this.items$=this.search$.pipe((0,S.h)(i=>null!==i),(0,L.w)(i=>this.serverRequest(i))),this.form=new a.cw({})}ngOnInit(){this.form=this.formGroupRoot.control,this.search$.next(null)}focus(){this.search$.next("")}onSearchChange(e){this.search$.next(e)}extractValueFromEvent(e){return e.target?.value||null}switchLocation(){const e=this.fromInput.host.value;this.fromInput.host.onValueChange(this.toInput.host.value),this.toInput.host.onValueChange(e)}serverRequest(e){return this.apiService.getAirports(e??"").pipe((0,Q.U)(i=>i.map(c=>`${c.name}, ${c.city} ${c.country}(${c.ICAO})`)))}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.sg),t.Y36(R.Z))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-location"]],viewQuery:function(e,n){if(1&e&&(t.Gf(Y,5),t.Gf(k,5)),2&e){let i;t.iGM(i=t.CRH())&&(n.fromInput=i.first),t.iGM(i=t.CRH())&&(n.toInput=i.first)}},decls:7,vars:7,consts:[[3,"formGroup"],["formGroupName","location","tuiGroup","",1,"location"],["tuiTextfieldSize","m","formControlName","from",3,"searchChange","focusedChange",4,"tuiLet"],["tuiIconButton","","icon","tuiIconRepeat","appearance","outline","size","m",3,"click"],["tuiTextfieldSize","m","formControlName","to",3,"searchChange",4,"tuiLet"],["tuiTextfieldSize","m","formControlName","from",3,"searchChange","focusedChange"],["tuiTextfield","","placeholder","Type a name",3,"input"],["from",""],[3,"items",4,"tuiDataList"],[3,"items"],["tuiTextfieldSize","m","formControlName","to",3,"searchChange"],["to",""]],template:function(e,n){1&e&&(t.ynx(0,0),t.TgZ(1,"div",1),t.YNc(2,H,5,0,"tui-combo-box",2),t.ALo(3,"async"),t.TgZ(4,"button",3),t.NdJ("click",function(){return n.switchLocation()}),t.qZA(),t.YNc(5,j,5,0,"tui-combo-box",4),t.ALo(6,"async"),t.qZA(),t.BQk()),2&e&&(t.Q6J("formGroup",n.form),t.xp6(2),t.Q6J("tuiLet",t.lcZ(3,3,n.items$)),t.xp6(3),t.Q6J("tuiLet",t.lcZ(6,5,n.items$)))},dependencies:[w.gX,U.eC,g.MB,l.sz,v.v0,M._p,M.m2,z.Ls,T.gZ,a.JJ,a.JL,a.sg,a.u,a.x0,h.Ov],styles:[".location[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:28px;flex-direction:column;position:relative;row-gap:4px}.location[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;display:flex;width:100%}.location[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:25%;right:15%;background-color:var(--tui-base-03);border-radius:50%;z-index:9999}"],changeDetection:0}),o})();var $=s(3639);let K=(()=>{class o{constructor(e){this.formGroupRoot=e,this.tripTypes=p.X,this.form=new a.cw({})}ngOnInit(){this.form=this.formGroupRoot.control}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(a.sg))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-type"]],decls:6,vars:5,consts:[[3,"formGroup"],["formGroupName","tripType","tuiGroup","",1,"trip-type"],["formControlName","type","size","m",1,"tui-space_bottom-5","tui-group__auto-width-item",3,"item"]],template:function(e,n){1&e&&(t.ynx(0,0),t.TgZ(1,"div",1)(2,"tui-radio-labeled",2),t._uU(3),t.qZA(),t.TgZ(4,"tui-radio-labeled",2),t._uU(5),t.qZA()(),t.BQk()),2&e&&(t.Q6J("formGroup",n.form),t.xp6(2),t.Q6J("item",n.tripTypes.round),t.xp6(1),t.hij(" ",n.tripTypes.round," "),t.xp6(1),t.Q6J("item",n.tripTypes.oneWay),t.xp6(1),t.hij(" ",n.tripTypes.oneWay," "))},dependencies:[$.Y,T.gZ,a.JJ,a.JL,a.sg,a.u,a.x0],styles:[".trip-type[_ngcontent-%COMP%]{display:flex;column-gap:32px;padding:0 20px;margin-bottom:12px}"]}),o})();var b=s(2245),O=s(9603);const f=function(){return{standalone:!0}};function E(o,r){if(1&o){const e=t.EpF();t.TgZ(0,"label",4)(1,"span",5)(2,"span"),t._uU(3,"Adults"),t.qZA(),t.TgZ(4,"span",6),t._uU(5,"14+ years"),t.qZA()(),t.TgZ(6,"tui-input-count",7),t.NdJ("ngModelChange",function(i){t.CHM(e);const c=t.oxw(2);return t.KtG(c.adults=i)}),t._uU(7," Adults "),t.qZA()(),t.TgZ(8,"label",4)(9,"span",5)(10,"span"),t._uU(11,"Child"),t.qZA(),t.TgZ(12,"span",6),t._uU(13,"2-14 years"),t.qZA()(),t.TgZ(14,"tui-input-count",7),t.NdJ("ngModelChange",function(i){t.CHM(e);const c=t.oxw(2);return t.KtG(c.child=i)}),t._uU(15," Child "),t.qZA()(),t.TgZ(16,"label",4)(17,"span",5)(18,"span"),t._uU(19,"Infant"),t.qZA(),t.TgZ(20,"span",6),t._uU(21,"0-2 years"),t.qZA()(),t.TgZ(22,"tui-input-count",7),t.NdJ("ngModelChange",function(i){t.CHM(e);const c=t.oxw(2);return t.KtG(c.infants=i)}),t._uU(23," Infants "),t.qZA()()}if(2&o){const e=t.oxw(2);t.xp6(6),t.Q6J("ngModel",e.adults)("ngModelOptions",t.DdM(9,f))("min",0),t.xp6(8),t.Q6J("ngModel",e.child)("ngModelOptions",t.DdM(10,f))("min",0),t.xp6(8),t.Q6J("ngModel",e.infants)("ngModelOptions",t.DdM(11,f))("min",0)}}function q(o,r){1&o&&t.YNc(0,E,24,12,"ng-template",3)}let tt=(()=>{class o{constructor(){this.secondMenuForm=new a.cw({passengers:new a.cw({adults:new a.NI(0),child:new a.NI(0),infants:new a.NI(0)})}),this.adults=0,this.child=0,this.infants=0,this.isOpen=!1}click(){this.isOpen=!this.isOpen}}return o.\u0275fac=function(e){return new(e||o)},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-passengers"]],decls:4,vars:4,consts:[["tuiTextfieldSize","m",1,"passengers_select",3,"tuiTextfieldLabelOutside","click"],["tuiTextfield","",3,"placeholder"],[4,"ngIf"],["tuiDataList",""],[1,"label"],[1,"col"],[1,"span"],["tuiTextfieldSize","m",1,"count",3,"ngModel","ngModelOptions","min","ngModelChange"]],template:function(e,n){1&e&&(t.TgZ(0,"tui-select",0),t.NdJ("click",function(){return n.click()}),t._uU(1),t._UZ(2,"input",1),t.YNc(3,q,1,0,null,2),t.qZA()),2&e&&(t.Q6J("tuiTextfieldLabelOutside",!0),t.xp6(1),t.hij(" ",n.adults.toString().concat(" Adult, ",n.child.toString()," Child, ",n.infants.toString()," Infant")," "),t.xp6(1),t.Q6J("placeholder",n.adults.toString().concat(" Adult, ",n.child.toString()," Child, ",n.infants.toString()," Infant")),t.xp6(1),t.Q6J("ngIf",n.isOpen))},dependencies:[w.gX,b.uJ,b.OI,g.MB,l.xT,l.sz,O.EA,O.aQ,a.JJ,a.On,h.O5],styles:["[_nghost-%COMP%], tui-hosted-dropdown[_ngcontent-%COMP%]{display:flex;width:100%}[_nghost-%COMP%]   .passengers_select[_ngcontent-%COMP%], tui-hosted-dropdown[_ngcontent-%COMP%]   .passengers_select[_ngcontent-%COMP%]{width:100%}.passengers_select[_ngcontent-%COMP%]{width:201px}.passengers_select[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:50%}.label[_ngcontent-%COMP%]{display:flex;width:90%;flex-wrap:nowrap;margin:5px auto}.label[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{display:flex;align-items:center;width:40%;flex-direction:column;justify-content:center;margin:5px auto}.label[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{display:flex;margin:5px;width:50%}.label[_ngcontent-%COMP%]   .span[_ngcontent-%COMP%]{color:#74767a;font-size:.8em}"],changeDetection:0}),o})();const et=["container"],nt=[{path:"",component:(()=>{class o{constructor(e,n,i){this.calendarFactory=e,this.store=n,this.router=i,this.container={},this.type=new Z.y,this.dateFormatSubscribtion=new d.w0,this.typeSubscription=new d.w0,this.changeDateSubscription=new d.w0,this.dateFormat=p.X.oneWay,this.searchFlightsForm=new a.cw({passengers:new a.cw({adults:new a.NI(0,[a.kI.required]),child:new a.NI(0,[a.kI.required]),infant:new a.NI(0,[a.kI.required])}),tripType:new a.cw({type:new a.NI(p.X.round,[a.kI.required])}),location:new a.cw({from:new a.NI("",[a.kI.required]),to:new a.NI("",[a.kI.required])}),date:new a.cw({oneWay:new a.NI(null,[a.kI.nullValidator,this.dateOneWayValidator.bind(this)]),range:new a.NI(null,[a.kI.nullValidator,this.dateRangeValidator.bind(this)])},{validators:this.dateGroupValidator()})})}ngOnInit(){this.type=this.searchFlightsForm.controls.tripType.valueChanges,this.typeSubscription=this.type.subscribe(()=>{this.tripType.value&&this.createCalendar(this.tripType.value)}),this.dateFormatSubscribtion=this.store.select(F.iY).subscribe(e=>{this.dateFormat=e;try{this.tripType.value&&this.createCalendar(this.tripType.value)}catch{}})}ngAfterViewInit(){this.tripType.value&&this.createCalendar(this.tripType.value)}ngOnDestroy(){this.dateFormatSubscribtion.unsubscribe(),this.typeSubscription.unsubscribe(),this.changeDateSubscription.unsubscribe()}onSubmit(){this.router.navigate(["/booking"]).catch(e=>console.log(e))}get tripType(){return this.searchFlightsForm.controls.tripType.controls.type}isOneWayTrip(){return this.tripType.value===p.X.oneWay}dateGroupValidator(){return e=>e.get("oneWay")?.value||e.get("range")?.value?null:{date:!0}}dateOneWayValidator(e){return!e.value||this.checkDate(e.value)?null:{date:!0}}dateRangeValidator(e){return!e.value||this.checkDate(e.value.from)?null:{date:!0}}checkDate(e){const n=(new Date).getTime();return new Date(e.year,e.month,e.day).getTime()>n}createCalendar(e){let n;e===p.X.oneWay?(n=this.calendarFactory.createOneWayCalendar(this.modifyDateFormat(this.dateFormat)),this.changeDateSubscription=n.instance.changeDateValue.subscribe(i=>{this.searchFlightsForm.controls.date.controls.oneWay.setValue(i)})):(n=this.calendarFactory.createRangeCalendar(this.modifyDateFormat(this.dateFormat)),this.changeDateSubscription=n.instance.changeDateValue.subscribe(i=>{this.searchFlightsForm.controls.date.controls.range.setValue(i)})),this.container.clear(),this.container.insert(n.hostView)}modifyDateFormat(e){return e.split("/").reduce((n,i)=>n+i[0],"")}}return o.\u0275fac=function(e){return new(e||o)(t.Y36(A),t.Y36(G.yh),t.Y36(m.F0))},o.\u0275cmp=t.Xpm({type:o,selectors:[["app-main-page"]],viewQuery:function(e,n){if(1&e&&t.Gf(et,5,t.s_b),2&e){let i;t.iGM(i=t.CRH())&&(n.container=i.first)}},decls:9,vars:2,consts:[[1,"flight-search",3,"formGroup","tuiTextfieldCleaner"],[1,"row"],["container",""],["tuiButton","","size","m",1,"button",3,"click"]],template:function(e,n){1&e&&(t.TgZ(0,"form",0),t._UZ(1,"app-type")(2,"app-location"),t.TgZ(3,"div",1),t.GkF(4,null,2),t._UZ(6,"app-passengers"),t.qZA(),t.TgZ(7,"button",3),t.NdJ("click",function(){return n.onSubmit()}),t._uU(8,"Search"),t.qZA()()),2&e&&t.Q6J("formGroup",n.searchFlightsForm)("tuiTextfieldCleaner",!0)},dependencies:[l.be,v.v0,a._Y,a.JL,a.sg,W,K,tt],styles:["[_nghost-%COMP%]{display:contents}.flight-search[_ngcontent-%COMP%]{box-shadow:0 1.125rem 1.875rem #0000007a;width:50%;max-width:580px;margin:62px auto auto;background-color:var(--tui-base-03);border-radius:8px;padding:24px;row-gap:8px}.flight-search[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;width:100%;flex-wrap:wrap;gap:5px}.flight-search[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:flex;width:120px;margin:32px 0 0 auto}@media screen and (max-width: 63.9625em){.flight-search[_ngcontent-%COMP%]{margin:50px auto;min-width:360px}}@media screen and (max-width: 47.9625em){.flight-search[_ngcontent-%COMP%]{margin:100px auto;min-width:300px}}.flight-search[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{text-align:center}.flight-search[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{margin:20px 0}.flight-search[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{width:50%;margin:20px 25%}"],changeDetection:0}),o})()}],ot=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[m.Bz.forChild(nt),m.Bz]}),o})(),at=(()=>{class o{}return o.\u0275fac=function(e){return new(e||o)},o.\u0275mod=t.oAB({type:o}),o.\u0275inj=t.cJS({imports:[P.Z,ot,a.UX,a.u5,h.ez,m.Bz]}),o})()}}]);