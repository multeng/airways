"use strict";(self.webpackChunkairways=self.webpackChunkairways||[]).push([[485],{3485:(at,_,s)=>{s.r(_),s.d(_,{default:()=>it});var i=s(433),h=s(6895),m=s(5870),P=s(6578),t=s(4650),Z=s(9751),d=s(727),F=s(833),l=s(8090),g=s(117),p=s(9886),C=s(415),y=s(6260);const J=["input"];let D=(()=>{class n{constructor(e){this.tokenValue=e,this.form=new i.cw({range:new i.NI}),this.changeDateValue=new t.vpe,this.input={},this.min=l.TU.fromLocalNativeDate(new Date),this.max=new l.TU(this.min.year,this.min.month+1,this.min.day)}changeValue(){this.changeDateValue.emit(this.form.controls.range.value)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.P_))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-date-range"]],viewQuery:function(e,o){if(1&e&&t.Gf(J,5),2&e){let a;t.iGM(a=t.CRH())&&(o.input=a.first)}},outputs:{changeDateValue:"changeDateValue"},decls:5,vars:3,consts:[[3,"formGroup"],["tuiUnfinishedValidator","Finish filling the field","formControlName","range","tuiTextfieldSize","m",1,"date",3,"min","max","tuiValueChanges"],["input",""],["tuiTextfield","","placeholder","From - To"]],template:function(e,o){1&e&&(t.ynx(0,0),t.TgZ(1,"tui-input-date-range",1,2),t.NdJ("tuiValueChanges",function(){return o.changeValue()}),t._uU(3," Choose dates "),t._UZ(4,"input",3),t.qZA(),t.BQk()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(1),t.Q6J("min",o.min)("max",o.max))},dependencies:[g.MB,p.sz,C.z,y.H5,y.dc,i.JJ,i.JL,i.sg,i.u],styles:[".date[_ngcontent-%COMP%]{width:310px;margin-right:20px}@media screen and (max-width: 47.9625em){[_nghost-%COMP%]{width:100%}.date[_ngcontent-%COMP%]{width:100%;margin-right:20px;margin-bottom:10px}}"]}),n})();var x=s(1841);const V=["input"];let I=(()=>{class n{constructor(e){this.tokenValue=e,this.changeDateValue=new t.vpe,this.input={},this.form=new i.cw({date:new i.NI})}changeValue(){this.changeDateValue.emit(this.form.controls.date.value)}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(l.P_))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-date"]],viewQuery:function(e,o){if(1&e&&t.Gf(V,5),2&e){let a;t.iGM(a=t.CRH())&&(o.input=a.first)}},outputs:{changeDateValue:"changeDateValue"},decls:4,vars:1,consts:[[3,"formGroup"],["tuiTextfieldSize","m","formControlName","date",3,"tuiValueChanges"],["input",""]],template:function(e,o){1&e&&(t.ynx(0,0),t.TgZ(1,"tui-input-date",1,2),t.NdJ("tuiValueChanges",function(){return o.changeValue()}),t._uU(3," Choose a date "),t.qZA(),t.BQk()),2&e&&t.Q6J("formGroup",o.form)},dependencies:[p.sz,C.z,x.jL,x.k_,i.JJ,i.JL,i.sg,i.u]}),n})(),A=(()=>{class n{constructor(e,o){this.componentFactoryResolver=e,this.injector=o}createOneWayCalendar(e){const o=this.componentFactoryResolver.resolveComponentFactory(I),a=t.zs3.create({providers:[{provide:l.P_,useValue:e}],parent:this.injector});return o.create(a)}createRangeCalendar(e){const o=this.componentFactoryResolver.resolveComponentFactory(D),a=t.zs3.create({providers:[{provide:l.P_,useValue:e}],parent:this.injector});return o.create(a)}}return n.\u0275fac=function(e){return new(e||n)(t.LFG(t._Vd),t.LFG(t.zs3))},n.\u0275prov=t.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"}),n})();var u=(()=>{return(n=u||(u={})).oneWay="One Way",n.round="Round Trip",u;var n})(),G=s(9653),w=s(9367),N=s(7579),S=s(9300),L=s(3900),Q=s(4004),R=s(2524),v=s(3861),T=s(9216),U=s(8917),M=s(7765),z=s(4227);const k=["from"],Y=["to"];function W(n,r){if(1&n&&t._UZ(0,"tui-data-list-wrapper",9),2&n){const e=t.oxw().tuiLet;t.Q6J("items",e)}}function B(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tui-combo-box",5),t.NdJ("searchChange",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.onSearchChange(a))})("focusedChange",function(){t.CHM(e);const a=t.oxw();return t.KtG(a.focus())}),t._uU(1," From "),t.TgZ(2,"input",6,7),t.NdJ("input",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.onSearchChange(c.extractValueFromEvent(a)))}),t.qZA(),t.YNc(4,W,1,1,"tui-data-list-wrapper",8),t.qZA()}}function H(n,r){if(1&n&&t._UZ(0,"tui-data-list-wrapper",9),2&n){const e=t.oxw().tuiLet;t.Q6J("items",e)}}function j(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"tui-combo-box",10),t.NdJ("searchChange",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.onSearchChange(a))}),t._uU(1," To "),t.TgZ(2,"input",6,11),t.NdJ("input",function(a){t.CHM(e);const c=t.oxw();return t.KtG(c.onSearchChange(c.extractValueFromEvent(a)))}),t.qZA(),t.YNc(4,H,1,1,"tui-data-list-wrapper",8),t.qZA()}}let $=(()=>{class n{constructor(e,o){this.formGroupRoot=e,this.apiService=o,this.search$=new N.x,this.fromInput={},this.toInput={},this.items$=this.search$.pipe((0,S.h)(a=>null!==a),(0,L.w)(a=>this.serverRequest(a))),this.form=new i.cw({})}ngOnInit(){this.form=this.formGroupRoot.control,this.search$.next(null)}focus(){this.search$.next("")}onSearchChange(e){this.search$.next(e)}extractValueFromEvent(e){return e.target?.value||null}switchLocation(){const e=this.fromInput.host.value;this.fromInput.host.onValueChange(this.toInput.host.value),this.toInput.host.onValueChange(e)}serverRequest(e){return this.apiService.getAirports(e??"").pipe((0,Q.U)(a=>a.map(c=>`${c.name}, ${c.city} ${c.country}(${c.ICAO})`)))}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(i.sg),t.Y36(R.Z))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-location"]],viewQuery:function(e,o){if(1&e&&(t.Gf(k,5),t.Gf(Y,5)),2&e){let a;t.iGM(a=t.CRH())&&(o.fromInput=a.first),t.iGM(a=t.CRH())&&(o.toInput=a.first)}},decls:7,vars:7,consts:[[3,"formGroup"],["formGroupName","location","tuiGroup","",1,"location"],["tuiTextfieldSize","m","formControlName","from",3,"searchChange","focusedChange",4,"tuiLet"],["tuiIconButton","","icon","tuiIconRepeat","appearance","outline","size","m",3,"click"],["tuiTextfieldSize","m","formControlName","to",3,"searchChange",4,"tuiLet"],["tuiTextfieldSize","m","formControlName","from",3,"searchChange","focusedChange"],["tuiTextfield","","placeholder","Type a name",3,"input"],["from",""],[3,"items",4,"tuiDataList"],[3,"items"],["tuiTextfieldSize","m","formControlName","to",3,"searchChange"],["to",""]],template:function(e,o){1&e&&(t.ynx(0,0),t.TgZ(1,"div",1),t.YNc(2,B,5,0,"tui-combo-box",2),t.ALo(3,"async"),t.TgZ(4,"button",3),t.NdJ("click",function(){return o.switchLocation()}),t.qZA(),t.YNc(5,j,5,0,"tui-combo-box",4),t.ALo(6,"async"),t.qZA(),t.BQk()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(2),t.Q6J("tuiLet",t.lcZ(3,3,o.items$)),t.xp6(3),t.Q6J("tuiLet",t.lcZ(6,5,o.items$)))},dependencies:[v.gX,U.eC,g.MB,p.sz,w.v0,M._p,M.m2,z.Ls,T.gZ,i.JJ,i.JL,i.sg,i.u,i.x0,h.Ov],styles:[".location[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:28px;flex-direction:column;position:relative;row-gap:4px}.location[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{position:absolute;display:flex;width:100%}.location[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{position:absolute;top:25%;right:15%;background-color:var(--tui-base-03);border-radius:50%;z-index:9999}"],changeDetection:0}),n})();var X=s(3639);let K=(()=>{class n{constructor(e){this.formGroupRoot=e,this.tripTypes=u,this.form=new i.cw({})}ngOnInit(){this.form=this.formGroupRoot.control}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(i.sg))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-type"]],decls:6,vars:5,consts:[[3,"formGroup"],["formGroupName","tripType","tuiGroup","",1,"trip-type"],["formControlName","type","size","m",1,"tui-space_bottom-5","tui-group__auto-width-item",3,"item"]],template:function(e,o){1&e&&(t.ynx(0,0),t.TgZ(1,"div",1)(2,"tui-radio-labeled",2),t._uU(3),t.qZA(),t.TgZ(4,"tui-radio-labeled",2),t._uU(5),t.qZA()(),t.BQk()),2&e&&(t.Q6J("formGroup",o.form),t.xp6(2),t.Q6J("item",o.tripTypes.round),t.xp6(1),t.hij(" ",o.tripTypes.round," "),t.xp6(1),t.Q6J("item",o.tripTypes.oneWay),t.xp6(1),t.hij(" ",o.tripTypes.oneWay," "))},dependencies:[X.Y,T.gZ,i.JJ,i.JL,i.sg,i.u,i.x0],styles:[".trip-type[_ngcontent-%COMP%]{display:flex;column-gap:32px;padding:0 20px;margin-bottom:12px}"]}),n})();var b=s(2245),O=s(9603);const f=function(){return{standalone:!0}};function E(n,r){if(1&n){const e=t.EpF();t.TgZ(0,"label",4)(1,"span",5)(2,"span"),t._uU(3,"Adults"),t.qZA(),t.TgZ(4,"span",6),t._uU(5,"14+ years"),t.qZA()(),t.TgZ(6,"tui-input-count",7),t.NdJ("ngModelChange",function(a){t.CHM(e);const c=t.oxw(2);return t.KtG(c.adults=a)}),t._uU(7," Adults "),t.qZA()(),t.TgZ(8,"label",4)(9,"span",5)(10,"span"),t._uU(11,"Child"),t.qZA(),t.TgZ(12,"span",6),t._uU(13,"2-14 years"),t.qZA()(),t.TgZ(14,"tui-input-count",7),t.NdJ("ngModelChange",function(a){t.CHM(e);const c=t.oxw(2);return t.KtG(c.child=a)}),t._uU(15," Child "),t.qZA()(),t.TgZ(16,"label",4)(17,"span",5)(18,"span"),t._uU(19,"Infant"),t.qZA(),t.TgZ(20,"span",6),t._uU(21,"0-2 years"),t.qZA()(),t.TgZ(22,"tui-input-count",7),t.NdJ("ngModelChange",function(a){t.CHM(e);const c=t.oxw(2);return t.KtG(c.infants=a)}),t._uU(23," Infants "),t.qZA()()}if(2&n){const e=t.oxw(2);t.xp6(6),t.Q6J("ngModel",e.adults)("ngModelOptions",t.DdM(9,f))("min",0),t.xp6(8),t.Q6J("ngModel",e.child)("ngModelOptions",t.DdM(10,f))("min",0),t.xp6(8),t.Q6J("ngModel",e.infants)("ngModelOptions",t.DdM(11,f))("min",0)}}function q(n,r){1&n&&t.YNc(0,E,24,12,"ng-template",3)}let tt=(()=>{class n{constructor(){this.secondMenuForm=new i.cw({passengers:new i.cw({adults:new i.NI(0),child:new i.NI(0),infants:new i.NI(0)})}),this.adults=0,this.child=0,this.infants=0,this.isOpen=!1}click(){this.isOpen=!this.isOpen}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-passengers"]],decls:4,vars:4,consts:[["tuiTextfieldSize","m",1,"passengers_select",3,"tuiTextfieldLabelOutside","click"],["tuiTextfield","",3,"placeholder"],[4,"ngIf"],["tuiDataList",""],[1,"label"],[1,"col"],[1,"span"],["tuiTextfieldSize","m",1,"count",3,"ngModel","ngModelOptions","min","ngModelChange"]],template:function(e,o){1&e&&(t.TgZ(0,"tui-select",0),t.NdJ("click",function(){return o.click()}),t._uU(1),t._UZ(2,"input",1),t.YNc(3,q,1,0,null,2),t.qZA()),2&e&&(t.Q6J("tuiTextfieldLabelOutside",!0),t.xp6(1),t.hij(" ",o.adults.toString().concat(" Adult, ",o.child.toString()," Child, ",o.infants.toString()," Infant")," "),t.xp6(1),t.Q6J("placeholder",o.adults.toString().concat(" Adult, ",o.child.toString()," Child, ",o.infants.toString()," Infant")),t.xp6(1),t.Q6J("ngIf",o.isOpen))},dependencies:[v.gX,b.uJ,b.OI,g.MB,p.xT,p.sz,O.EA,O.aQ,i.JJ,i.On,h.O5],styles:["[_nghost-%COMP%], tui-hosted-dropdown[_ngcontent-%COMP%]{display:flex;width:100%}[_nghost-%COMP%]   .passengers_select[_ngcontent-%COMP%], tui-hosted-dropdown[_ngcontent-%COMP%]   .passengers_select[_ngcontent-%COMP%]{width:100%}.passengers_select[_ngcontent-%COMP%]{width:201px}.passengers_select[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{width:50%}.label[_ngcontent-%COMP%]{display:flex;width:90%;flex-wrap:nowrap;margin:5px auto}.label[_ngcontent-%COMP%]   .col[_ngcontent-%COMP%]{display:flex;align-items:center;width:40%;flex-direction:column;justify-content:center;margin:5px auto}.label[_ngcontent-%COMP%]   .count[_ngcontent-%COMP%]{display:flex;margin:5px;width:50%}.label[_ngcontent-%COMP%]   .span[_ngcontent-%COMP%]{color:#74767a;font-size:.8em}"],changeDetection:0}),n})();const et=["container"],nt=[{path:"",component:(()=>{class n{constructor(e,o,a){this.calendarFactory=e,this.store=o,this.router=a,this.container={},this.type=new Z.y,this.dateFormatSubscribtion=new d.w0,this.typeSubscription=new d.w0,this.changeDateSubscription=new d.w0,this.dateFormat=u.oneWay,this.searchFlightsForm=new i.cw({passengers:new i.cw({adults:new i.NI(0,[i.kI.required]),child:new i.NI(0,[i.kI.required]),infant:new i.NI(0,[i.kI.required])}),tripType:new i.cw({type:new i.NI(u.round,[i.kI.required])}),location:new i.cw({from:new i.NI("",[i.kI.required]),to:new i.NI("",[i.kI.required])}),date:new i.cw({oneWay:new i.NI(null,[i.kI.nullValidator,this.dateOneWayValidator.bind(this)]),range:new i.NI(null,[i.kI.nullValidator,this.dateRangeValidator.bind(this)])},{validators:this.dateGroupValidator()})})}ngOnInit(){this.type=this.searchFlightsForm.controls.tripType.valueChanges,this.typeSubscription=this.type.subscribe(()=>{this.tripType.value&&this.createCalendar(this.tripType.value)}),this.dateFormatSubscribtion=this.store.select(F.iY).subscribe(e=>{this.dateFormat=e;try{this.tripType.value&&this.createCalendar(this.tripType.value)}catch{}})}ngAfterViewInit(){this.tripType.value&&this.createCalendar(this.tripType.value)}ngOnDestroy(){this.dateFormatSubscribtion.unsubscribe(),this.typeSubscription.unsubscribe(),this.changeDateSubscription.unsubscribe()}onSubmit(){this.router.navigate(["/booking"]).catch(e=>console.log(e))}get tripType(){return this.searchFlightsForm.controls.tripType.controls.type}isOneWayTrip(){return this.tripType.value===u.oneWay}dateGroupValidator(){return e=>e.get("oneWay")?.value||e.get("range")?.value?null:{date:!0}}dateOneWayValidator(e){return!e.value||this.checkDate(e.value)?null:{date:!0}}dateRangeValidator(e){return!e.value||this.checkDate(e.value.from)?null:{date:!0}}checkDate(e){const o=(new Date).getTime();return new Date(e.year,e.month,e.day).getTime()>o}createCalendar(e){let o;e===u.oneWay?(o=this.calendarFactory.createOneWayCalendar(this.modifyDateFormat(this.dateFormat)),this.changeDateSubscription=o.instance.changeDateValue.subscribe(a=>{this.searchFlightsForm.controls.date.controls.oneWay.setValue(a)})):(o=this.calendarFactory.createRangeCalendar(this.modifyDateFormat(this.dateFormat)),this.changeDateSubscription=o.instance.changeDateValue.subscribe(a=>{this.searchFlightsForm.controls.date.controls.range.setValue(a)})),this.container.clear(),this.container.insert(o.hostView)}modifyDateFormat(e){return e.split("/").reduce((o,a)=>o+a[0],"")}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(A),t.Y36(G.yh),t.Y36(m.F0))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-main-page"]],viewQuery:function(e,o){if(1&e&&t.Gf(et,5,t.s_b),2&e){let a;t.iGM(a=t.CRH())&&(o.container=a.first)}},decls:9,vars:2,consts:[[1,"flight-search",3,"formGroup","tuiTextfieldCleaner"],[1,"row"],["container",""],["tuiButton","","size","m",1,"button",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"form",0),t._UZ(1,"app-type")(2,"app-location"),t.TgZ(3,"div",1),t.GkF(4,null,2),t._UZ(6,"app-passengers"),t.qZA(),t.TgZ(7,"button",3),t.NdJ("click",function(){return o.onSubmit()}),t._uU(8,"Search"),t.qZA()()),2&e&&t.Q6J("formGroup",o.searchFlightsForm)("tuiTextfieldCleaner",!0)},dependencies:[p.be,w.v0,i._Y,i.JL,i.sg,$,K,tt],styles:["[_nghost-%COMP%]{display:contents}.flight-search[_ngcontent-%COMP%]{box-shadow:0 1.125rem 1.875rem #0000007a;width:50%;max-width:580px;margin:62px auto auto;background-color:var(--tui-base-03);border-radius:8px;padding:24px;row-gap:8px}.flight-search[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{display:flex;width:100%}.flight-search[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{display:flex;width:120px;margin:32px 0 0 auto}@media screen and (max-width: 63.9625em){.flight-search[_ngcontent-%COMP%]{margin:50px auto;min-width:360px;width:80%}}@media screen and (max-width: 47.9625em){.flight-search[_ngcontent-%COMP%]{margin:100px auto;min-width:300px;width:90%}.flight-search[_ngcontent-%COMP%]   .row[_ngcontent-%COMP%]{flex-wrap:wrap}}.flight-search[_ngcontent-%COMP%]   .header[_ngcontent-%COMP%]{text-align:center}.flight-search[_ngcontent-%COMP%]   .form-field[_ngcontent-%COMP%]{margin:20px 0}.flight-search[_ngcontent-%COMP%]   .button[_ngcontent-%COMP%]{width:50%;margin:20px 25%}"],changeDetection:0}),n})()}],ot=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[m.Bz.forChild(nt),m.Bz]}),n})(),it=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[P.Z,ot,i.UX,i.u5,h.ez,m.Bz]}),n})()}}]);